-- ðŸ›  Services
local Players = game:GetService("Players")
local TweenService = game:GetService("TweenService")
local RunService = game:GetService("RunService")
local UserInputService = game:GetService("UserInputService")

local player = Players.LocalPlayer

-- ðŸ–¥ ScreenGui
local screenGui = Instance.new("ScreenGui")
screenGui.Name = "MegaHackUI"
screenGui.Parent = player:WaitForChild("PlayerGui")
screenGui.ResetOnSpawn = false

-- ðŸŒŒ Blur background
local blur = Instance.new("BlurEffect", game.Lighting)
blur.Size = 0

-- ================== LOADING SCREEN ==================
local loadingFrame = Instance.new("Frame")
loadingFrame.Size = UDim2.new(1, 0, 1, 0)
loadingFrame.BackgroundColor3 = Color3.fromRGB(15, 15, 20)
loadingFrame.Parent = screenGui

-- Logo xoay
local logo = Instance.new("ImageLabel")
logo.AnchorPoint = Vector2.new(0.5, 0.5)
logo.Position = UDim2.new(0.5, 0, 0.35, 0)
logo.Size = UDim2.new(0, 150, 0, 150)
logo.BackgroundTransparency = 1
logo.Image = "rbxassetid://118732820826841"
logo.Parent = loadingFrame

local rotation = 0
RunService.RenderStepped:Connect(function(dt)
    rotation = rotation + 90 * dt
    logo.Rotation = rotation
end)

-- Text loading rainbow
local loadingText = Instance.new("TextLabel")
loadingText.AnchorPoint = Vector2.new(0.5, 0.5)
loadingText.Position = UDim2.new(0.5, 0, 0.55, 0)
loadingText.Size = UDim2.new(0, 500, 0, 50)
loadingText.BackgroundTransparency = 1
loadingText.Text = "Mega Hack FREE - Loading..."
loadingText.Font = Enum.Font.GothamBold
loadingText.TextSize = 30
loadingText.Parent = loadingFrame

local hue = 0
RunService.RenderStepped:Connect(function()
    hue = (hue + 0.005) % 1
    loadingText.TextColor3 = Color3.fromHSV(hue, 1, 1)
end)

-- Progress bar background
local progressBarBG = Instance.new("Frame")
progressBarBG.AnchorPoint = Vector2.new(0.5, 0.5)
progressBarBG.Position = UDim2.new(0.5, 0, 0.65, 0)
progressBarBG.Size = UDim2.new(0, 400, 0, 25)
progressBarBG.BackgroundColor3 = Color3.fromRGB(40, 40, 50)
progressBarBG.Parent = loadingFrame
Instance.new("UICorner", progressBarBG).CornerRadius = UDim.new(0, 12)

-- Progress bar fill
local progressBarFill = Instance.new("Frame")
progressBarFill.Size = UDim2.new(0, 0, 1, 0)
progressBarFill.BackgroundColor3 = Color3.fromRGB(0, 170, 255)
progressBarFill.Parent = progressBarBG
Instance.new("UICorner", progressBarFill).CornerRadius = UDim.new(0, 12)

-- ================== MAIN GUI ==================
local mainFrame = Instance.new("Frame")
mainFrame.Size = UDim2.new(0, 700, 0, 500)
mainFrame.AnchorPoint = Vector2.new(0.5, 0.5)
mainFrame.Position = UDim2.new(0.5, 0, 0.5, 0)
mainFrame.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
mainFrame.Visible = false
mainFrame.Parent = screenGui
Instance.new("UICorner", mainFrame).CornerRadius = UDim.new(0, 20)
mainFrame.Active = true
mainFrame.Draggable = true

-- Tabs container
local tabFrame = Instance.new("Frame")
tabFrame.Size = UDim2.new(1, -20, 0, 40)
tabFrame.Position = UDim2.new(0, 10, 0, 10)
tabFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 55)
tabFrame.Parent = mainFrame
Instance.new("UICorner", tabFrame).CornerRadius = UDim.new(0, 10)

local tabList = Instance.new("UIListLayout", tabFrame)
tabList.FillDirection = Enum.FillDirection.Horizontal
tabList.HorizontalAlignment = Enum.HorizontalAlignment.Left
tabList.Padding = UDim.new(0, 5)

-- Content
local contentFrame = Instance.new("Frame")
contentFrame.Size = UDim2.new(1, -20, 1, -60)
contentFrame.Position = UDim2.new(0, 10, 0, 50)
contentFrame.BackgroundTransparency = 1
contentFrame.Parent = mainFrame

local scroll = Instance.new("ScrollingFrame")
scroll.Size = UDim2.new(1, 0, 1, 0)
scroll.CanvasSize = UDim2.new(0, 0, 0, 0)
scroll.ScrollBarThickness = 6
scroll.Parent = contentFrame

local buttonLayout = Instance.new("UIListLayout", scroll)
buttonLayout.Padding = UDim.new(0, 5)
buttonLayout.HorizontalAlignment = Enum.HorizontalAlignment.Center

-- HÃ m táº¡o tab
local function createTab(name, iconId, scripts)
    local tabButton = Instance.new("TextButton")
    tabButton.Size = UDim2.new(0, 150, 1, 0)
    tabButton.BackgroundColor3 = Color3.fromRGB(60, 60, 80)
    tabButton.Text = ""
    tabButton.Parent = tabFrame
    Instance.new("UICorner", tabButton).CornerRadius = UDim.new(0, 10)

    local icon = Instance.new("ImageLabel")
    icon.Size = UDim2.new(0, 24, 0, 24)
    icon.Position = UDim2.new(0, 8, 0.5, -12)
    icon.BackgroundTransparency = 1
    icon.Image = iconId
    icon.Parent = tabButton

    local label = Instance.new("TextLabel")
    label.Size = UDim2.new(1, -40, 1, 0)
    label.Position = UDim2.new(0, 36, 0, 0)
    label.BackgroundTransparency = 1
    label.Text = name
    label.TextColor3 = Color3.new(1, 1, 1)
    label.Font = Enum.Font.GothamBold
    label.TextSize = 18
    label.TextXAlignment = Enum.TextXAlignment.Left
    label.Parent = tabButton

    tabButton.MouseButton1Click:Connect(function()
        scroll:ClearAllChildren()
        local layout = Instance.new("UIListLayout", scroll)
        layout.Padding = UDim.new(0, 5)
        layout.HorizontalAlignment = Enum.HorizontalAlignment.Center

        for _, data in ipairs(scripts) do
            local btn = Instance.new("TextButton")
            btn.Size = UDim2.new(0, 500, 0, 40)
            btn.Text = data.name
            btn.TextColor3 = Color3.new(1,1,1)
            btn.Font = Enum.Font.GothamBold
            btn.TextSize = 20
            btn.BackgroundColor3 = Color3.fromRGB(80, 80, 100)
            btn.Parent = scroll
            Instance.new("UICorner", btn).CornerRadius = UDim.new(0, 10)

            btn.MouseButton1Click:Connect(function()
                local success, err = pcall(function()
                    loadstring(game:HttpGet(data.url))()
                end)
                if not success then
                    warn("Script load failed:", err)
                end
            end)
        end

        scroll.CanvasSize = UDim2.new(0, 0, 0, #scripts * 45)
    end)
end

-- Tabs
createTab("Visual", "rbxassetid://118732820826841", {
    {name = "PShader", url = "https://raw.githubusercontent.com/randomstring0/pshade-ultimate/refs/heads/main/src/cd.lua"}
})

createTab("Fun", "rbxassetid://118732820826841", {
    {name = "Emote", url = "https://rawscripts.net/raw/Universal-Script-Emote-Script-but-Fast-47944"},
    {name = "Gazer", url = "https://rawscripts.net/raw/Universal-Script-Gazer-FE-Animation-Editor-14508"}
})

createTab("Utility", "rbxassetid://118732820826841", {
    {name = "Infinite Yield", url = "https://rawscripts.net/raw/Universal-Script-Infinite-Yield-31802"},
    {name = "Fake Lag", url = "https://rawscripts.net/raw/Universal-Script-Fake-Lag-Runner-read-description-44701"}
})

createTab("Doors", "rbxassetid://118732820826841", {
    {name = "Black King|KeyLess", url = "https://raw.githubusercontent.com/KINGHUB01/BlackKing-obf/main/Doors%20Blackking%20And%20BobHub"},
})

-- Toggle Button
local toggleButton = Instance.new("ImageButton")
toggleButton.AnchorPoint = Vector2.new(0, 1)
toggleButton.Position = UDim2.new(0, 10, 1, -10)
toggleButton.Size = UDim2.new(0, 60, 0, 60)
toggleButton.BackgroundColor3 = Color3.fromRGB(25, 25, 35)
toggleButton.Image = "rbxassetid://118732820826841"
toggleButton.Parent = screenGui
Instance.new("UICorner", toggleButton).CornerRadius = UDim.new(0, 15)

toggleButton.MouseButton1Click:Connect(function()
    mainFrame.Visible = not mainFrame.Visible
    blur.Size = mainFrame.Visible and 15 or 0
end)

-- Loading animation
TweenService:Create(progressBarFill, TweenInfo.new(2, Enum.EasingStyle.Linear), {Size = UDim2.new(1, 0, 1, 0)}):Play()

wait(2.1)
TweenService:Create(loadingFrame, TweenInfo.new(0.5), {BackgroundTransparency = 1}):Play()
TweenService:Create(loadingText, TweenInfo.new(0.3), {TextTransparency = 1}):Play()
TweenService:Create(logo, TweenInfo.new(0.3), {ImageTransparency = 1}):Play()
TweenService:Create(progressBarBG, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()
TweenService:Create(progressBarFill, TweenInfo.new(0.3), {BackgroundTransparency = 1}):Play()

wait(0.6)
loadingFrame:Destroy()
mainFrame.Visible = true
blur.Size = 15
